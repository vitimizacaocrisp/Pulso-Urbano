<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pulso Urbano: Observatório Nacional de Segurança Pública e Justiça</title>
  <link rel="shortcut icon" href="src/logo/crisp_logo.png" type="image/x-icon">
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Titillium+Web:wght@600;700&display=swap"
    rel="stylesheet">
</head>

<body>

  <header class="main-header">
    <nav class="navbar">
      <div class="logo-container">
        <a href="#" class="logo">
          <h1>Pulso Urbano</h1>
          <p class="tagline">Observatório Nacional de Segurança Pública e Justiça</p>
        </a>
      </div>

      <button id="mobileMenuIcon" class="mobile-menu-icon">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <ul class="nav-menu" id="mainNavMenu">
        <li><a href="#" class="active">Início</a></li>

        <li class="dropdown">
          <a href="#painéis">Painéis & Dados</a>
          <ul class="dropdown-content">
            <li><a href="/paineis/homicidios">Homicídios</a></li>
            <li><a href="/paineis/violencia-genero">Violência de Gênero</a></li>
            <li><a href="/paineis/vitimizacao">Vitimiação</a></li>
            <li><a href="/paineis/sistema-justica">Sistema de Justiça e Prisional</a></li>
            <li><a href="/paineis/atividade-policial">Atividade Policial e Crime Organizado</a></li>
            <li><a href="/paineis/crimes-economicos">Crimes Econômicos e Corrupção</a></li>
          </ul>
        </li>

        <li><a href="/publicacoes">Publicações</a></li>
        <li><a href="/analises">Análises & Cenários</a></li>
        <li><a href="/educacao">Educação</a></li>
        <li><a href="/sobre">Sobre</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="hero-content">
        <h2>Democratizando dados e análises sobre segurança pública e justiça no Brasil.</h2>
        <p>O Pulso Urbano integra dados de vitimização e registros administrativos para revelar um panorama completo
          sobre a criminalidade e o acesso à justiça no país.</p>
        <a href="#paineis" class="btn-primary">Explorar os Painéis</a>
      </div>
    </section>

    <section class="featured-section" id="paineis">
      <h2 class="section-title">Painéis em Destaque</h2>
      <div class="card-container">
        <article class="card">
          <h3>Monitor do Homicídio</h3>
          <p>Análise detalhada das taxas de homicídios dolosos, perfil das vítimas e o impacto do crime organizado.</p>
          <a href="/paineis/homicidios" class="card-link">Acessar Painel</a>
        </article>

        <article class="card">
          <h3>Observatório da Violência de Gênero</h3>
          <p>Dados sobre feminicídio e violência doméstica, revelando o lar como um dos espaços mais perigosos para
            mulheres.</p>
          <a href="/paineis/violencia-genero" class="card-link">Acessar Painel</a>
        </article>

        <article class="card">
          <h3>Atlas da Vitimização</h3>
          <p>Explore dados sobre crimes reportados e não reportados à polícia, baseados em pesquisas de vitimização.</p>
          <a href="/paineis/vitimizacao" class="card-link">Acessar Painel</a>
        </article>
      </div>
    </section>
    
    <section class="context-section">
      <h2 class="section-title">Contexto Nacional <span class="data-source">(IBGE, 2022)</span></h2>
      <div class="card-container" id="ibge-data-container">
        <article class="card card-data-highlight">
            <h3 id="total-population-title">População Total do Brasil</h3>
            <p id="total-population-value" class="data-value">Carregando...</p>
        </article>

        <article class="card">
            <h3 id="top-state-1-name">Carregando...</h3>
            <p id="top-state-1-value" class="data-value">&nbsp;</p>
        </article>
        <article class="card">
            <h3 id="top-state-2-name">Carregando...</h3>
            <p id="top-state-2-value" class="data-value">&nbsp;</p>
        </article>
        <article class="card">
            <h3 id="top-state-3-name">Carregando...</h3>
            <p id="top-state-3-value" class="data-value">&nbsp;</p>
        </article>
      </div>
    </section>
    <section class="analysis-section">
      <h2 class="section-title">Últimas Análises</h2>
      <div class="card-container">
        <article class="card card-analysis">
          <div class="card-content">
            <span class="analysis-tag">Prospecção de Cenários</span>
            <h4>O impacto das mudanças climáticas na violência urbana</h4>
            <p>Um estudo sobre como eventos climáticos extremos podem remodelar os padrões de criminalidade nas grandes
              cidades brasileiras na próxima década.</p>
            <a href="/analises/artigo1" class="card-link">Ler mais</a>
          </div>
        </article>

        <article class="card card-analysis">
          <div class="card-content">
            <span class="analysis-tag">Sistema de Justiça</span>
            <h4>A superlotação carcerária e seus efeitos na reincidência</h4>
            <p>Uma análise baseada em dados do sistema prisional sobre a correlação entre a superlotação e as taxas de
              reincidência criminal.</p>
            <a href="/analises/artigo2" class="card-link">Ler mais</a>
          </div>
        </article>
      </div>
    </section>
  </main>

  <footer class="main-footer">
    <div class="footer-content">
      <div class="footer-logo">
        <h3>Pulso Urbano</h3>
        <p>Um projeto do <a href="https://www.crisp.ufmg.br" target="_blank">CRISP/UFMG</a></p>
      </div>
      <div class="footer-links">
        <h4>Navegue</h4>
        <ul>
          <li><a href="#paineis">Painéis & Dados</a></li>
          <li><a href="/publicacoes">Publicações</a></li>
          <li><a href="/sobre">Sobre o Projeto</a></li>
          <li><a href="/educacao">Educação</a></li>
        </ul>
      </div>
      <div class="footer-contact">
        <h4>Contato</h4>
        <p>Para parcerias, sugestões ou dúvidas, entre em contato conosco.</p>
        <p>Email: <a href="mailto:contato@pulsourbano.org">contato@pulsourbano.org</a></p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Pulso Urbano. Todos os direitos reservados.</p>
    </div>
  </footer>

  <button id="backToTopBtn" title="Voltar ao topo">&uarr;</button>

  <script src="js/script.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            // 1. Busca os dados da nossa API de população
            const response = await fetch('/api/contexto/populacao');
            if (!response.ok) throw new Error('Falha ao carregar dados');
            
            const data = await response.json();

            // 2. Calcula a população total somando os valores de cada estado
            const totalPopulation = data.reduce((sum, state) => sum + state.populacao, 0);

            // 3. Ordena os estados pela população (do maior para o menor) e pega os 3 primeiros
            const top3States = data.sort((a, b) => b.populacao - a.populacao).slice(0, 3);
            
            // 4. Atualiza o card da população total
            document.getElementById('total-population-value').textContent = totalPopulation.toLocaleString('pt-BR');

            // 5. Atualiza os cards dos 3 estados mais populosos
            top3States.forEach((state, index) => {
                document.getElementById(`top-state-${index + 1}-name`).textContent = state.uf;
                document.getElementById(`top-state-${index + 1}-value`).textContent = state.populacao.toLocaleString('pt-BR');
            });

        } catch (error) {
            console.error("Erro ao carregar dados do IBGE para a página inicial:", error);
            // Em caso de erro, exibe uma mensagem no card principal
            const errorElement = document.getElementById('total-population-value');
            if(errorElement) {
                errorElement.textContent = 'Não foi possível carregar';
                errorElement.style.color = '#c55';
            }
        }
    });
  </script>

</body>

</html>