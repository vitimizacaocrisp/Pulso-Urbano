/* Importa as variáveis globais */
@import url('../variaveis.css');

/* =========================================
   LAYOUT GERAL E HEADER
   ========================================= */
.main-header-bar {
  background-color: var(--bg-surface);
  padding: var(--spacing-lg) var(--spacing-xl);
  border-bottom: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--spacing-md);
  flex-wrap: wrap;
}

.header-content h1 {
  margin: 0;
  color: var(--text-main);
}

.header-content p {
  margin: 0;
  color: var(--text-muted);
}

.content-section {
  padding: var(--spacing-xl);
  max-width: var(--container-width);
  margin: 0 auto;
}

.content-manager-wrapper {
  position: relative;
}

/* =========================================
   BOTÕES E INTERATIVIDADE
   ========================================= */
/* Botão Toggle Preview */
.btn-toggle-preview {
  background-color: transparent;
  border: 1px solid var(--sys-primary);
  color: var(--sys-primary);
  padding: var(--spacing-xs) var(--spacing-md);
  border-radius: 5px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
}

.btn-toggle-preview:hover {
  background-color: var(--sys-primary);
  color: var(--bg-surface);
}

.btn-toggle-preview:disabled {
  border-color: var(--border-input);
  color: var(--border-input);
  cursor: not-allowed;
  background-color: transparent;
}

/* Botões de Ação (Publish, Clear, Delete) */
.btn-publish, .btn-clear, .btn-delete, .btn-confirm, .btn-cancel, .btn-confirm-delete {
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.2s;
}

.btn-publish {
  padding: 0.8rem 2rem;
  background-color: var(--sys-success);
  color: var(--bg-surface);
  font-size: 1rem;
}
.btn-publish:hover { background-color: var(--sys-success-hover); }
.btn-publish:disabled { background-color: #a5d6a7; cursor: not-allowed; }

.btn-clear {
  padding: 0.8rem 1.5rem;
  background-color: var(--sys-secondary);
  color: var(--bg-surface);
  font-size: 1rem;
}
.btn-clear:hover { background-color: var(--sys-secondary-hover); }

.btn-delete, .btn-confirm-delete {
  background-color: var(--sys-danger);
  color: var(--bg-surface);
  padding: 0.6rem 1.2rem;
}
.btn-delete:hover, .btn-confirm-delete:hover { background-color: var(--sys-danger-hover); }

.btn-confirm {
  padding: 0.5rem 1rem;
  background: var(--sys-primary);
  color: var(--bg-surface);
}
.btn-confirm:hover { background: var(--sys-primary-hover); }

.btn-cancel {
  padding: 0.6rem 1.5rem;
  background-color: var(--sys-secondary);
  color: var(--bg-surface);
}

.btn-back, .btn-close-modal {
  border: none;
  background: transparent;
  cursor: pointer;
  color: var(--text-muted);
}
.btn-back:hover { color: var(--text-main); text-decoration: underline; }

/* =========================================
   MODAIS, MENUS E GRIDS
   ========================================= */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background-color: var(--bg-surface);
  padding: var(--spacing-xl);
  border-radius: var(--radius-md);
  width: 90%;
  max-width: 550px;
  text-align: center;
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.menu-content { max-width: 650px; }

.modal-header {
  background: var(--bg-body);
  padding: var(--spacing-md);
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--border-color);
  margin: -2rem -2rem 1.5rem -2rem; /* Negativo para encostar nas bordas devido ao padding do content */
}

.modal-header h3 { margin: 0; font-size: 1.1rem; color: var(--text-main); }

.modal-body { padding: 0.5rem 0; }
.modal-footer {
  padding: var(--spacing-md);
  background: var(--bg-body);
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: flex-end;
  gap: 0.5rem;
  margin: 1.5rem -2rem -2rem -2rem;
}

/* Tabs no Modal */
.modal-tabs {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  border-bottom: 1px solid #eee;
}
.tab-btn {
  background: none;
  border: none;
  padding: 0.5rem 1rem;
  cursor: pointer;
  font-size: 0.95rem;
  color: var(--text-muted);
  border-bottom: 2px solid transparent;
}
.tab-btn.active {
  color: var(--sys-primary);
  border-bottom: 2px solid var(--sys-primary);
  font-weight: 600;
}

/* Grid de Recursos (Ícones) */
.menu-instruction { text-align: center; color: var(--text-muted); margin-bottom: 1.5rem; }

.resource-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 1rem;
}

.resource-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 1.5rem 0.5rem;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--bg-surface);
  cursor: pointer;
  transition: all 0.2s ease;
  height: 100%;
}

.resource-btn:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-md);
  border-color: var(--sys-primary);
}

.resource-btn .icon { font-size: 2rem; margin-bottom: 0.5rem; }
.resource-btn .label { font-size: 0.9rem; font-weight: 600; color: #444; text-align: center; }

/* Highlights nos ícones */
.highlight-purple .icon { filter: drop-shadow(0 0 5px rgba(138,43,226,0.3)); }
.highlight-blue .icon { filter: drop-shadow(0 0 5px rgba(0,123,255,0.3)); }
.highlight-green .icon { filter: drop-shadow(0 0 5px rgba(40,167,69,0.3)); }

/* =========================================
   FORMS & INPUTS
   ========================================= */
.form-container, .search-fieldset {
  background: var(--bg-surface);
  padding: 2.5rem;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  margin-bottom: 2rem;
}

fieldset {
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}
legend { font-weight: 600; padding: 0 0.5rem; color: var(--text-main); font-size: 1.2rem; }

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.form-group { margin-bottom: 1.5rem; }
.form-group label, .input-section label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: #555;
}

.form-group input, .form-group textarea, .form-group select, .modal-input, .search-input {
  background-color: var(--bg-body);
  color: var(--text-header-logo);
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border-input);
  border-radius: var(--radius-sm);
  font-size: 1rem;
  box-sizing: border-box;
}
.form-group input:focus, .form-group textarea:focus, .form-group select:focus, .modal-input:focus, .search-input:focus {
  background-color: var(--bg-body);
  color: var(--text-header-logo);
  outline: none;
  border-color: var(--sys-primary);
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
}

.required { color: var(--sys-danger); }
.hint-text { color: #888; font-style: italic; }

.form-actions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
}

/* Upload de Arquivo */
.file-upload-box {
  border: 2px dashed var(--border-input);
  padding: 2rem;
  text-align: center;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 0.2s;
}
.file-upload-box:hover { background: var(--bg-body); }
.file-input-hidden { display: none; }
.file-upload-label { cursor: pointer; display: block; width: 100%; height: 100%; font-weight: 600; color: var(--sys-primary); }

.fieldset-image { display: flex; flex-direction: column; overflow: hidden; }
.image-preview {
  max-width: 200px;
  height: auto;
  margin: 1rem auto;
  display: block;
  border-radius: var(--radius-sm);
  border: 1px solid #ddd;
}

/* Mensagens de Feedback */
.feedback-message { margin-top: 1.5rem; padding: 1rem; border-radius: var(--radius-sm); font-weight: 500; }
.feedback-message.success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
.feedback-message.error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

/* Pesquisa Dropdown */
.search-wrapper { position: relative; }
.search-dropdown {
  position: absolute;
  top: 100%; left: 0; right: 0;
  background: var(--bg-surface);
  border: 1px solid var(--border-input);
  max-height: 250px;
  overflow-y: auto;
  z-index: 10;
  box-shadow: var(--shadow-md);
}
.search-dropdown ul { list-style: none; margin: 0; padding: 0; }
.search-dropdown li { padding: 0.8rem; cursor: pointer; border-bottom: 1px solid var(--bg-body); }
.search-dropdown li:hover { background: var(--bg-body); }

/* =========================================
   EDITOR E TOOLBAR
   ========================================= */
.single-button-toolbar {
  background: var(--bg-body);
  padding: 0.75rem 1rem;
  border: 1px solid var(--border-input);
  border-bottom: none;
  border-radius: var(--radius-sm) var(--radius-sm) 0 0;
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.toolbar-main-btn {
  background: var(--sys-primary);
  color: var(--bg-surface);
  border: none;
  padding: 0.6rem 1.2rem;
  border-radius: 30px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: background 0.2s;
  box-shadow: var(--shadow-sm);
}
.toolbar-main-btn:hover { background: var(--sys-primary-hover); }

.toolbar-hint {
  color: var(--text-muted);
  font-size: 0.9rem;
  font-style: italic;
  flex: 1;
  min-width: 200px;
}

.editor-format-buttons {
  display: flex;
  gap: 4px;
  margin-left: auto;
  flex-wrap: wrap;
}

.format-btn {
  background: #2d2d2d;
  color: #fff;
  border: 1px solid #444;
  border-radius: var(--radius-sm);
  padding: 6px 10px;
  font-size: 13px;
  cursor: pointer;
  min-width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}
.format-btn:hover { background: #3d3d3d; border-color: var(--sys-primary); }

.editor-container {
  height: 600px;
  border: 1px solid var(--border-input);
  border-radius: 0 0 var(--radius-sm) var(--radius-sm);
  border-top: none;
  overflow: hidden;
}

/* Hacks para Monaco Editor */
.vs { --monaco-editor-background: #ffffff; }
.vs-dark { --monaco-editor-background: #1e1e1e; }
.monaco-editor, .monaco-editor {
  background-color: var(--monaco-editor-background) !important;
}

/* =========================================
   PREVIEW (VISUALIZAÇÃO DE NOTÍCIA)
   ========================================= */
.news-preview {
  max-width: 1000px;
  margin: 1rem auto 3rem;
  background: var(--bg-surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  padding-bottom: 2rem;
}

.cover-image { width: 100%; max-height: 320px; object-fit: cover; display: block; }

.preview-header { padding: 1.5rem 2rem 0.5rem 2rem; text-align: left; }
.preview-title {
  font-size: 2.5rem;
  color: #222;
  margin-bottom: 0.25rem;
  line-height: 1.1;
  font-weight: 900;
  letter-spacing: -1px;
}
.preview-subtitle {
  font-size: 1.25rem;
  color: var(--sys-highlight);
  font-weight: 500;
  margin-bottom: 0.25rem;
}

.preview-meta {
  font-size: 0.92rem;
  color: #888;
  margin-top: 1rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem 1.5rem;
}
.preview-category {
  background: var(--sys-highlight);
  color: var(--bg-surface);
  font-weight: 600;
  padding: 0.1em 0.75em;
  border-radius: 36px;
  font-size: 0.9em;
}

.preview-description { overflow-wrap: anywhere; padding: 0 2rem 1rem 2rem; font-size: 1.22rem; color: #333; font-weight: 400; }
.preview-content { padding: 0 2rem; font-size: 1.08rem; color: #212121; line-height: 1.6; word-break: break-word; }
.preview-section-title { padding: 1.5rem 2rem 0.5rem 2rem; color: var(--sys-highlight); font-weight: bold; font-size: 1.1rem; }
.preview-links { padding: 0 2rem 1rem 2rem; list-style: disc inside; margin-bottom: 1rem; }
.preview-links a { color: #0079ba; text-decoration: underline; }

/* Mídia Incorporada no Preview */
.preview-content figure { margin: 2rem auto; text-align: center; }
.preview-content figcaption { margin-top: 0.75rem; color: var(--text-muted); font-size: 0.9rem; font-style: italic; }
.preview-content img { max-width: 100%; height: auto; border-radius: var(--radius-md); box-shadow: var(--shadow-md); }
.preview-content video { max-width: 800px; width: 80%; height: auto; border-radius: var(--radius-md); box-shadow: 0 4px 15px rgba(0,0,0,0.15); background-color: #000; outline: none; }
.preview-content audio { width: 100%; max-width: 600px; margin: 1em auto; display: block; accent-color: var(--sys-primary); }

/* Cards de Recurso (Notebooks, Scripts) */
.resource-card {
  display: flex; align-items: center;
  background-color: var(--bg-body);
  border: 1px solid var(--border-color);
  border-left: 4px solid var(--sys-primary);
  padding: 1rem;
  margin: 1.5rem 0;
  border-radius: var(--radius-sm);
}
.resource-card.notebook { border-left-color: var(--sys-warning); background-color: var(--bg-notebook); }
.resource-card.script { border-left-color: var(--sys-purple); background-color: var(--bg-script); }
.resource-card.document { border-left-color: var(--sys-info); background-color: var(--bg-document); }
.resource-card.data { border-left-color: var(--sys-success); background-color: var(--bg-data); }
.resource-card.link-card { border-left-color: var(--sys-secondary); background-color: var(--bg-surface); }

.resource-icon { font-size: 2rem; margin-right: 1rem; }
.resource-info { display: flex; flex-direction: column; width: 100%; }
.resource-info strong { font-size: 1rem; margin-bottom: 0.5rem; }

.resource-links { display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap; }
.resource-link {
  font-size: 0.85rem; padding: 4px 8px; border-radius: var(--radius-sm);
  text-decoration: none !important; font-weight: 600;
  display: inline-flex; align-items: center; transition: all 0.2s; cursor: pointer;
}
.resource-link:hover { opacity: 0.9; transform: translateY(-1px); }
.resource-link.raw { background: #f0f0f0; color: #444; border: 1px solid #ccc; }
.resource-link.colab { background: #f9ab00; color: #fff; border: 1px solid #e39b00; }
.resource-link.nbviewer { background: #e67e22; color: #fff; border: 1px solid #d35400; }

/* =========================================
   ZONA DE PERIGO
   ========================================= */
.danger-zone { margin-top: 2rem; border: 2px solid var(--sys-danger); background: var(--bg-danger-light); padding: 1.5rem; border-radius: var(--radius-md); }
.danger-content { display: flex; justify-content: space-between; align-items: center; }

/* =========================================
   RESPONSIVIDADE (MEDIA QUERIES UNIFICADAS)
   ========================================= */
@media (max-width: 1000px) {
  .content-section { padding: 0.5rem; }
  .form-container { padding: 1.5rem; }
  .news-preview { max-width: 100%; border-radius: 0; box-shadow: none; }
}

@media (max-width: 768px) {
  .main-header-bar { justify-content: center; text-align: center; padding: 1rem; }
  .content-section { padding: 0; }
  .form-container, fieldset { padding: 1rem; }
  .form-grid { grid-template-columns: 1fr; }
  .resource-grid { grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); }
  .danger-content { flex-direction: column; gap: 1rem; text-align: center; }
  
  .image-preview { max-width: 40%; }
  
  .single-button-toolbar { flex-direction: column; align-items: flex-start; }
  .toolbar-hint { margin-top: 10px; }
  .editor-format-buttons { margin-left: 0; margin-top: 10px; width: 100%; justify-content: flex-start; }
  .editor-container { height: 400px; }
  
  .form-actions { justify-content: center; }
  .form-actions button { width: 100%; max-width: 300px; }
  
  .preview-header, .preview-description, .preview-content { padding-left: 1rem; padding-right: 1rem; }
  .cover-image { max-height: 200px; }
}

@media (max-width: 480px) {
  .editor-container { height: 300px; }
  .image-preview { max-width: 100%; }
  .preview-title { font-size: 1.5rem; }
}